---
layout: post
title: MIUI V4移植经验分享 （一） —— 选取合适的底包 
categories: tech
tags:  MIUI Porting 移植 底包 ROM
---

我做MIUI V4移植也有一段时间了，从最早的DEFY，到华为的U8800，再到现在的HTC One系列。  
一路走来，也积累了一些经验。现在总结一下分享给大家，欢迎民间高手批评指正。

首先说明一下，MIUI ROM制作已经发布[官方教程](http://www.miui.com/thread-430751-1-1.html)，有兴趣的同学们可以详细学习。  
我这里经验主要出于个人兴趣写的一些总结，没有那么浓的官方色彩，想到哪里写到哪里。
最后，欢迎大家批评指正，共同进步。好了废话不多说，开始今天的议题：  

<!--more-->

	1.MIUI V4 ROM的制作流程
	2.如何选择合适的底包

先来说说MIUI ROM的制作流程。ROM制作可以简，可繁。但我个人认为还是遵从一定的流程才会取得较好的质量。  
所以我总结了一个MIUI V4 ROM制作流程。当然其他ROM制作也可以参考。主要流程如下：

	A.搭建移植环境。
	B.选择合适的底包。
	C.预处理底包。
	D.移植MIUI V4 framework。
	E.移植MIUI V4 APP。
	F.调优移植ROM。

第一步搭建移植环境已经在官方教程和[MIUI PatchRom项目](https://github.com/MiCode/PatchRom)中有详细描述，这里就不展开说明。  

在开始逐一介绍后面的流程前，还要多啰嗦一句，要想让这一流程发挥出好的效果，需要ROM制作者使用调试机做主机。  
这里所谓的主机就是自己的日常用机。这样可以在鞭策自己解决问题的同时，也可以第一时间品尝自己的劳动成果。  
当然，这不是必须的“心法”，毕竟不能强求每个ROM制作者都拥有N多调试机器。  

好的，在完成前面的热身后，我们开始介绍今天的“主角”——如何选择合适的底包。  
为了让大家更好的理解，范例部分主要以HTC系列为主，当然也会类比其他机型。  

面对今天的主题，第一个问题即“什么是底包”？对于MIUI V4 ROM来说底包就是官方原厂的ROM，例如：HTC 的官方RUU, 三星的官方的Odin，华为的官方dload包等等。
一般意义上来说，底包就是基础ROM，相当于西红柿炒蛋的西红柿和鸡蛋。同理，制作ROM的过程就是 将西红柿和鸡蛋炒在一起的过程。呵呵，其中的滋味只有“厨师”自己才能体味。

那么对于咱们ROM制作者怎么才能选择合适的底包呢？  
首先说一下，我认为选底包的精髓——刷入“有好感”的底包，而后做主机用用。  
这就好比追女生，只是暗恋是没有结果的，必须“追”了以后才知道是否合适。  

其次，世界是多样的，每个人都有不同的爱好，下面分别说说。  

	A.对于MIUI V4 的移植爱好者，我们建议推荐官方ROM，例如HTC RUU。原因很简单，用官方底包相对稳定，而且一般都是全功能可用的。另外一个好处是可以拿到MIUI论坛来发布。
	B.对于“修理”MIUI V4 的爱好者，我们建议直接选择已经发布的MIUI官方ROM进行二次开发，原因是我们有PatchRom项目支持，对有助于你打造属于自己的MIUI ROM。
	C.对于高性能爱好者，我们建议选择CM9作为低包。因为CM9整体的性能比较好，当然付出的代价是不稳定，很可能有些功能不WORK。
	D.对于职业ROM制作者

总的来说底包选取过程就是牛顿先生曾经说过的“站在巨人的肩膀上”的过程，只不过各位机油们心中的“巨人”各有不同罢了。  

好了，今天先说这么多，简单经验总结，欢迎各位拍砖。